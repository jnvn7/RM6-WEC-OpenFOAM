# 2D Wave Flume

<div align="justify">

## Overview 
This directory houses four specific example cases based upon the template case illustrated in <tt>template_wave_flume</tt>, as well as an example mesh convergence study performed for each of the cases. 

It is recommended that the interested user start with the <tt>README</tt> file in the template case directory <tt>template_wave_flume</tt>, which contains instructions on how to run a case, as well as documentation on the simulation setup, <tt>OpenFOAM</tt> dictionary files and file structure, and post-processing.  

The four example cases are each built by making modifications to the template case, and are ready to be run "as-is". They are described in more detail below in [Example cases](#example-cases). 

For each example case, there are two directories, one labeled with the example name alone, and one marked as "pre-packaged", i.e. <tt>case1_regular</tt> and <tt>case1_regular_prepackaged</tt>. The "pre-packaged" folders contain pre-generated wave probe data for each case from a successful <tt>OpenFOAM</tt> simulation, and are provided so that the interested user can compare their own simulation results with the pre-packaged data as a sanity check for their own results. For more information on comparing with this data, see [Comparing with pre-packaged wave probe data](#comparing-with-pre-packaged-wave-probe-data-for-example-cases). 


## Example cases 
### Descriptions
Three conditions from the PacWave South test sites are selected (see TABLE 1). 
These represent: 1) the most commonly occurring seas, 2) the highest annualized wave energy sea state, and 3) one of the extreme sea states on the 50-year contour (Dunkle et al., 2020). 
While these correspond to the irregular sea states at the site, for the current project, we will simulate them as regular wave conditions. 
The significant wave height ($H_s$) and energy period ($T_e$) are treated as regular wave height and period, respectively. 

For completeness, case 4 serves to simulate case 2 (TABLE 1) as irregular sea state. 
It is noted that all simulation demonstration cases developed in this project are scaled at a 1:15 ratio, which provides an appropriate size for typical wave flume experimental tests. 
&nbsp;

<p align='middle'>

| Test Name | Case 1 | Case 2 | Case 3 | Case 4 | 
------------|--------|--------|--------|----------
| Wave type | Regular | Regular | Regular | Irregular | 
| $H_s (m)$ | 1.75 (0.12) | 2.75 (0.18) | 7.45 (0.50) | 1.75 (0.12)| 
| $T_e (s)$ | 8.50 (2.20) | 10.5 (2.71) | 10.0 (2.58) | 8.50 (2.20)| 
| $\lambda (m)$ | 112.80 (7.52) | 172.13 (11.48) | 156.13 (10.41) | 112.80 (7.52)|

</p>
<p align='middle'> TABLE 1 - Wave Characteristics </p>

</div>
&nbsp;

[1]	Dunkle, G., Robertson, B., Garc√≠a-Medina, G., & Yang, Z. (2020). Pacwave wave resource assessment.

### Provided python scripts
Several python scripts are provided for plotting and analysis of simulation results -- <tt>plotWaves.py</tt>, which the user can call directly to plot simulation results, and <tt>coreFuncs.py</tt>, which provides auxiliary functionalities needed in <tt>plotWaves.py</tt> (i.e. analytical solutions for various wave models, calculating wave height and period from a provided signal, etc.). 

<tt>plotWaves.py</tt> can be used to plot the wave probe data generated during a simulation, which is stored within the case folder in <tt>postProcessing</tt>. The script can additionally be used to compare the results from multiple simulations against one another.

__To use this script for a single simulation__, call the script with the name of the simulation directory as the function input. i.e., running 
```
python plotWaves.py case1_regular_prepackaged
```
should display the plot

</div>
&nbsp;
<p align="middle">
  <img src="https://github.com/jnvn7/RM6-WEC-OpenFoam/blob/main/images/case1_prepackaged_plotWaves.png" height="400"/>
</p>

<p align='middle'> Figure 1 - Example figure generated by plotWaves.py for the pre-pacakged regular wave case 1. </p>

__To use this script for a single simulation__, call the script with the name of the desired simulation directories to compare as the function input. i.e., running 
```
python plotWaves.py case1_regular_prepackaged case2_regular_prepackaged case3_regular_prepackaged
```
should display the plot

&nbsp;
<p align="middle">
  <img src="https://github.com/jnvn7/RM6-WEC-OpenFoam/blob/main/images/plotWaves_compare_prepackaged_cases.png" height="400"/>
</p>

<p align='middle'> Figure 2 - Example figure generated by plotWaves.py for comparing the pre-pacakged regular wave cases 1, 2, and 3. </p>
_Note:_ In this case, ignore the ``Refinement level'' plot on the right panel, which is a helpful feature for plotting mesh refinement studies but is not necessarily relevant for comparing two different wave cases. 

### Comparing with pre-packaged wave probe data for example cases
For each example case, pre-packaged wave probe data is provided as a "sanity check" for the user to compare with their own simulated data. This data is housed in the <tt>prePackaged-postProcessing</tt> directory of each example case. If the case has run correctly, the user-generated wave probe data in <tt>postProcessing</tt> should match the data in <tt>prePackaged-postProcessing</tt>. 

To check if this is the case, the user can use the provided python script <tt>plotWaves.py</tt> as described above, with the input arguments being the directories of the user-generated and pre-packaged data, i.e. 
```
python plotWaves.py case2_regular case2_regular_prepackaged
```
will compare the user-generated and pre-packaged data for case 2. If the user's simulation has run correctly, the resulting plot should look like Figure 3 below. 

<p align="middle">
  <img src="https://github.com/jnvn7/RM6-WEC-OpenFoam/blob/main/images/plotWaves_compare_usergen_vs_prepack_case2.png" width="400"/>
</p>
<p align='middle'> Figure 3 - Example output of the <tt>plotWaves.py</tt> python script, plotting the user-generated wave probe data vs. the pre-packaged wave probe data for example case 2. </p>

### Mesh resolution study